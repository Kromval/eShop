## 1. Общие сведения
### 1.1. Полное наименование системы
Интернет-магазин с поддержкой ролей пользователей (покупатель, менеджер, администратор).  
### 1.2 Заказчик:  
ИП Лактионнов Евгений
### 1.3 Исполнитель:  
Я
### 1.4 Сроки выполнения:  
Начало работ: 01.04.2025
Окончание работ: 29.04.2025
### 1.5 Источник финансирования
Нету :(
### 1.6. Порядок разработки и сдачи
Разработка проводится поэтапно с предоставлением промежуточных отчётов заказчику после каждого этапа. Итоговая сдача системы осуществляется после успешного завершения тестирования и утверждения заказчиком.
## 2. Назначение и цели создания системы
### 2.1. Назначение системы
Обеспечение автоматизации процессов онлайн-продаж товаров с возможностью управления каталогом товаров, заказами и пользователями.    
### 2.2. Цели создания системы
- Обеспечение удобного интерфейса для покупателей с функциями поиска, фильтрации товаров и оформления заказов.
- Создание инструментов для менеджеров и администраторов для управления товарами, заказами и учётными записями пользователей.
- Гарантия безопасности пользовательских данных и процессов авторизации.
## 3. Характеристики объекта автоматизации
### 3.1. Объект автоматизации
Процессы онлайн-продаж, управления ассортиментом товаров, обработки заказов и администрирования пользователей.
### 3.2. Существующие бизнес-процессы
В настоящий момент продажи осуществляются через физические магазины без использования автоматизированной системы онлайн-продаж.    
## 4. Требования к системе

### 4.1. Требования к системе в целом

#### 4.1.1. Архитектура системы:  
Система должна быть реализована как веб-приложение с разделением на клиентскую часть (фронтенд), серверную часть (бэкенд) и базу данных. Взаимодействие между фронтендом и бэкендом осуществляется через RESTful API с использованием формата JSON. Должна быть предусмотрена возможность масштабирования системы за счёт добавления новых серверов (горизонтальное масштабирование).
    
#### 4.1.2. Используемые технологии:
- Фронтенд: React (версия 18.x) с использованием Redux для управления состоянием, TypeScript для типизации кода, и CSS-фреймворка Material-UI для стилизации.
- Бэкенд: ASP.NET WebAPI (версия .NET 8) с использованием Entity Framework Core для работы с базой данных и AutoMapper для маппинга данных.
- База данных: PostgreSQL (версия 15.x) с поддержкой расширений pg_trgm и tsvector для полнотекстового поиска.
- ??? Кэширование: Redis для хранения сессий и часто запрашиваемых данных (например, списка популярных товаров).
#### 4.1.3. Кроссплатформенность и адаптивность:
- Система должна корректно отображаться и функционировать на устройствах с разрешением экрана от 320x480 пикселей (мобильные устройства) до 2560x1440 пикселей (десктопы).
- Поддерживаемые браузеры: последние версии Chrome, Firefox, Safari, Edge, а также их версии за последние 2 года.
- Адаптивный дизайн с использованием медиа-запросов и поддержкой сенсорного управления для мобильных устройств.

#### 4.1.4. Доступность и отказоустойчивость:
- Уровень доступности системы (uptime) — не менее 99,9% в год, исключая плановые технические работы, о которых пользователи уведомляются за 48 часов.
- ??? Автоматическое создание резервных копий базы данных каждые 24 часа с хранением копий за последние 7 дней и ежемесячных копий за последние 3 месяца.

#### 4.1.5. Производительность:
- Время отклика API на запросы не более 2 секунд для 95% операций при нагрузке до 1000 одновременных пользователей.
- Время загрузки страницы каталога товаров (20 элементов) — не более 1,5 секунд при стандартном интернет-соединении (50 Мбит/с).
- Поддержка пиковой нагрузки до 5000 одновременных пользователей с увеличением времени отклика не более чем до 5 секунд.
### 4.2. Требования к функциям системы
#### 4.2.1. Функции для покупателя
- Регистрация:
    - Форма регистрации с обязательными полями: имя (2–50 символов), email (валидация формата), пароль (минимум 8 символов, включая буквы разного регистра, цифры и спецсимволы).
    - ???? Подтверждение email: отправка письма с уникальной ссылкой, действующей 24 часа.
    - ??? Защита от ботов: CAPTCHA (Google reCAPTCHA v3).

- Авторизация:
    - Вход по email и паролю с ограничением 5 попыток ввода за 15 минут для предотвращения подбора пароля.
    - ??? Восстановление пароля: отправка временной ссылки на email (действительна 1 час) с возможностью ввода нового пароля.

- Просмотр каталога товаров:
    - Список товаров с пагинацией (по 20 товаров на странице).
    - Фильтры: категории, цена, наличие.
    - Сортировка: по цене (возрастание/убывание), новизне (дата добавления).
    - Поиск: полнотекстовый с учётом синонимов, минимальная длина запроса — 3 символа, автодополнение после ввода 2 символов.
    - Карточка товара: название, описание (до 5000 символов), цена, изображения (до 5 штук, формат JPG/PNG, до 2 МБ каждое), остаток, отзывы.

- Корзина:
    - Добавление товара с выбором количества (ограничено остатком на складе).
    - Отображение: миниатюра товара, название, цена за единицу, общее количество, итоговая стоимость с учётом скидок.
    - Функции: изменение количества, удаление товара, очистка корзины.
    - Сохранение содержимого корзины при выходе из аккаунта (синхронизация с сервером).

- Оформление заказа:
    - Шаг 1: выбор способа доставки (курьер, самовывоз, почта) с указанием стоимости и сроков.
    - Шаг 2: выбор способа оплаты (банковская карта онлайн, наличные при получении, рассрочка через партнёрский сервис).
    - Шаг 3: ввод данных: адрес доставки (страна, город, улица, дом, квартира), контактный телефон (валидация формата), комментарий (до 500 символов).
    - Итоговое подтверждение с отображением всех данных и номера заказа.

- Личный кабинет:
    - История заказов: список с фильтрацией по дате, статусу (новый, в обработке, доставлен, отменён), детали каждого заказа (товары, стоимость, адрес).
    - Редактирование данных: имя, email, телефон, адрес доставки по умолчанию.
    - Управление паролем: смена с вводом текущего и нового пароля.

#### 4.2.2. Функции для менеджера
- Авторизация:
    - Вход по email и паролю с обязательной проверкой роли через JWT-токен.
    - Лог событий входа с указанием IP-адреса и времени.

- Управление заказами:
    - Список заказов с фильтрами: статус, дата, номер заказа, имя покупателя.
    - Детали заказа: список товаров, стоимость, способ доставки/оплаты, контактные данные покупателя, комментарий.
    - Изменение статуса: новый → в обработке → собран → отправлен → доставлен/отменён с указанием причины отмены (до 200 символов).

#### 4.2.3. Функции для администратора
- Авторизация:
    - Ограничение доступа по IP (настраиваемый белый список).

- Управление товарами:
    - Добавление товара: название (до 200 символов), описание (форматированный текст до 5000 символов), изображения (до 5), категории (множественный выбор), артикул (уникальный), остаток (0–99999).
    - Редактирование и удаление с подтверждением действия.
- Управление пользователями:
    - Список пользователей: фильтры по роли, дате регистрации, статусу (активен/заблокирован).
    - Добавление: email, имя, роль (покупатель/менеджер/администратор), пароль.
    - Редактирование: изменение роли, данных
    
- Отчёты: количество заказов, выручка, популярные товары (по категориям и единицам) за день/неделю/месяц.

### 4.3. Требования к видам обеспечения
#### 4.3.1. Программное обеспечение:
- Сервер: ОС Ubuntu 22.04 LTS, Nginx как обратный прокси, Docker для контейнеризации.
#### 4.3.2. Аппаратное обеспечение:
- Сервер: минимум 4 ядра (2.5 ГГц), 16 ГБ RAM, SSD 100 ГБ, пропускная способность сети 1 Гбит/с.
- Резервный сервер для отказоустойчивости с синхронизацией данных.

### 4.4. Требования к информационной безопасности
#### 4.4.1. Аутентификация и авторизация:
- JWT-токены с временем жизни 1 час и refresh-токенами (24 часа).
- Роли проверяются на уровне middleware в ASP.NET.

#### 4.4.2. Защита данных:
- Хеширование паролей (bcrypt).
- Шифрование чувствительных данных в базе (например, адресов) с использованием AES-256.
#### 4.4.3. Защита от атак:
- Ограничение частоты запросов (rate limiting): 100 запросов/минуту с одного IP.
## 5. Состав и содержание работ по созданию системы
### 5.1. Этапы разработки
1. Проектирование системы (анализ требований, разработка архитектуры).
2. Разработка серверной части (бэкенд).    
3. Разработка клиентской части (фронтенд).    
4. Интеграция и тестирование системы.  
5. Развертывание системы на сервере.
### 5.2. Контроль и приёмка:
- Промежуточные тестирования после завершения каждого этапа.
- Итоговое тестирование системы в присутствии заказчика с выставлением оценки.
## 6. Требования к составу и содержанию работ по подготовке объекта автоматизации к вводу системы в действие
- Перенос существующих данных о товарах и пользователях в новую систему (при наличии таких данных).
- Настройка серверного оборудования и базы данных.
- Обучение персонала (менеджеров и администраторов) работе с системой.

## 7. Требования к документированию
- Техническое задание (настоящий документ).
